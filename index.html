<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glow - Viral AI Prompt Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_ADSENSE_ID" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Floating Background Shapes -->
    <div class="bg-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
    </div>

    <!-- Header with Profile Dropdown -->
    <header class="main-header" style="position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); padding: 15px 0;">
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <div class="logo" style="display: flex; align-items: center; gap: 10px;">
                <span style="font-size: 24px; font-weight: 700; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Glow</span>
            </div>
            <div class="profile-section" id="profile-section">
                <button class="login-header-btn" id="login-header-btn" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: 500;">Login</button>
                <div class="profile-dropdown" id="profile-dropdown" style="display: none; position: relative;">
                    <button class="profile-btn" id="profile-btn" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 8px 15px; border-radius: 25px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                        <div class="avatar" style="width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2);"></div>
                        <span id="user-name">User</span>
                        <span style="font-size: 12px;">‚ñº</span>
                    </button>
                    <div class="dropdown-menu" id="dropdown-menu" style="display: none; position: absolute; top: 100%; right: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; padding: 10px 0; min-width: 150px; margin-top: 5px;">
                        <a href="gallery.html" style="display: block; padding: 10px 20px; color: white; text-decoration: none; font-size: 14px; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='transparent'">üì± Browse Prompts</a>
                        <button id="logout-btn" style="width: 100%; text-align: left; padding: 10px 20px; background: none; border: none; color: white; font-size: 14px; cursor: pointer; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='transparent'">üö™ Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" style="padding-top: 100px;">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title" data-parallax>
                    Discover
                    <span class="gradient-text">Viral AI Prompts</span>
                    That Go Viral ‚ú®
                </h1>
                <p class="hero-subtitle">
                    Find the hottest AI image prompts that create viral content. Get access to trending prompts used by top creators worldwide.
                </p>
                <div class="hero-buttons">
                    <a href="gallery.html" class="cta-button primary" style="text-decoration: none;">Browse Viral Prompts</a>
                    <button class="cta-button secondary" id="login-btn">Login for Full Access</button>
                </div>
                
                <!-- Auth buttons for non-logged in users -->
                <div class="auth-buttons" id="auth-buttons" style="margin-top: 20px; display: none;">
                    <p style="margin-bottom: 15px; color: var(--text-secondary);">Login to start generating AI looks</p>
                    <a href="auth.html" class="cta-button primary" style="text-decoration: none; margin-right: 10px;">Login / Register</a>
                    <span style="color: var(--text-secondary);">Get 3 free generations!</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Prompts Section -->
    <section class="featured-prompts">
        <div class="container">
            <div class="glass-card featured-card">
                <h2>üî• Free Preview - Top 3 Viral Prompts</h2>
                <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">Get a taste of our viral prompt collection. Login to access 15+ premium prompts for all AI tools!</p>
                
                <div class="free-prompts-grid" id="free-prompts" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin: 30px 0;">
                    <!-- Free prompts will be loaded here -->
                </div>
                
                <div class="login-prompt" style="text-align: center; margin-top: 30px; padding: 25px; background: var(--glass-bg); border-radius: 15px; border: 1px solid var(--glass-border);">
                    <h3 style="margin-bottom: 15px;">üîì Want More Viral Prompts?</h3>
                    <p style="margin-bottom: 20px; color: var(--text-secondary);">Login with Google to access our complete collection of 15+ viral AI prompts for ChatGPT, Gemini, Midjourney & more</p>
                    <button class="cta-button primary" id="google-login-btn" style="font-size: 1.1rem; padding: 15px 30px;">üöÄ Login with Google - It's Free!</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Examples Section -->
    <section class="examples">
        <div class="container">
            <h2 class="section-title">Trending Viral Prompts</h2>
            <div class="examples-grid" id="trending-examples">
                <div class="example-card">
                    <div class="example-image">
                        <img src="https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=300&h=400&fit=crop" alt="Viral Portrait Style">
                        <div class="prompt-overlay">
                            <button class="copy-prompt-btn" data-prompt="Professional headshot with cinematic lighting, sharp focus, bokeh background, studio quality, trending on social media">Copy Prompt</button>
                        </div>
                    </div>
                    <div class="example-caption">Viral Portrait Style</div>
                </div>
                <div class="example-card">
                    <div class="example-image">
                        <img src="https://images.unsplash.com/photo-1507591064344-4c6ce005b128?w=300&h=400&fit=crop" alt="Cyberpunk Viral">
                        <div class="prompt-overlay">
                            <button class="copy-prompt-btn" data-prompt="Cyberpunk portrait with neon lighting, futuristic aesthetic, glowing eyes, dark urban background, viral social media style">Copy Prompt</button>
                        </div>
                    </div>
                    <div class="example-caption">Cyberpunk Viral</div>
                </div>
                <div class="example-card">
                    <div class="example-image">
                        <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=300&h=400&fit=crop" alt="Vintage Viral">
                        <div class="prompt-overlay">
                            <button class="copy-prompt-btn" data-prompt="Vintage 1970s aesthetic, warm film grain, retro clothing, nostalgic vibes, Instagram viral style">Copy Prompt</button>
                        </div>
                    </div>
                    <div class="example-caption">Vintage Viral</div>
                </div>
            </div>
            <div class="view-all-container">
                <a href="gallery.html" class="cta-button secondary">Explore 15+ Viral Prompts ‚Üí</a>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section class="how-it-works">
        <div class="container">
            <h2 class="section-title">How It Works</h2>
            <div class="steps-grid">
                <div class="step-card">
                    <div class="step-icon">üîç</div>
                    <h3>Browse Prompts</h3>
                    <p>Discover viral AI prompts used by top creators</p>
                </div>
                <div class="step-card">
                    <div class="step-icon">üìù</div>
                    <h3>Copy & Use</h3>
                    <p>Copy prompts and use them in your AI tools</p>
                </div>
                <div class="step-card">
                    <div class="step-icon">üöÄ</div>
                    <h3>Go Viral</h3>
                    <p>Create content that gets millions of views</p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="final-cta">
        <div class="container">
            <div class="glass-card cta-card">
                <h2>Ready to Find Viral Prompts?</h2>
                <p>Join thousands of creators using our viral AI prompts</p>
                <div class="cta-buttons" style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <a href="gallery.html" class="cta-button primary" style="text-decoration: none;">Browse Free Prompts</a>
                    <button class="cta-button secondary" id="final-login-btn">Login for Full Access</button>
                </div>
            </div>
        </div>
    </section>

    <script type="module">
        // Import Supabase
        import { createClient } from 'https://cdn.skypack.dev/@supabase/supabase-js';
        
        const supabaseUrl = 'https://xmponioxmzfftfrowcrf.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhtcG9uaW94bXpmZnRmcm93Y3JmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMTg1NTQsImV4cCI6MjA3MzU5NDU1NH0.sFIGvTn6q69Z8D2lSW-f0SYRmE2AgLB2Y1ZVm2g0dj4';
        const supabase = createClient(supabaseUrl, supabaseKey);
        
        let currentUser = null;
        
        // Handle login buttons
        document.addEventListener('DOMContentLoaded', async () => {
            // Check current session
            const { data: { session } } = await supabase.auth.getSession();
            if (session) {
                currentUser = session.user;
                updateHeaderUI();
            }
            
            // Listen for auth changes
            supabase.auth.onAuthStateChange((event, session) => {
                if (event === 'SIGNED_IN') {
                    currentUser = session.user;
                    updateHeaderUI();
                } else if (event === 'SIGNED_OUT') {
                    currentUser = null;
                    updateHeaderUI();
                }
            });
            
            const loginBtns = document.querySelectorAll('#login-btn, #google-login-btn, #final-login-btn, #login-header-btn');
            
            loginBtns.forEach(btn => {
                btn.addEventListener('click', async () => {
                    try {
                        const { data, error } = await supabase.auth.signInWithOAuth({
                            provider: 'google',
                            options: {
                                redirectTo: 'http://localhost:8080/index.html'
                            }
                        });
                        
                        if (error) throw error;
                    } catch (error) {
                        console.error('Login error:', error);
                        alert('Login failed: ' + error.message);
                    }
                });
            });
            
            // Profile dropdown functionality
            const profileBtn = document.getElementById('profile-btn');
            const dropdownMenu = document.getElementById('dropdown-menu');
            const logoutBtn = document.getElementById('logout-btn');
            
            if (profileBtn) {
                profileBtn.addEventListener('click', () => {
                    dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
                });
            }
            
            if (logoutBtn) {
                logoutBtn.addEventListener('click', async () => {
                    try {
                        const { error } = await supabase.auth.signOut();
                        if (error) throw error;
                    } catch (error) {
                        console.error('Logout error:', error);
                    }
                });
            }
            
            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.profile-dropdown')) {
                    if (dropdownMenu) dropdownMenu.style.display = 'none';
                }
            });
            
            // Load free prompts on homepage
            loadFreePrompts();
            
            // Also try loading after a short delay in case DOM isn't ready
            setTimeout(() => {
                if (document.getElementById('free-prompts') && document.getElementById('free-prompts').children.length === 0) {
                    loadFreePrompts();
                }
            }, 500);
        });
        
        function updateHeaderUI() {
            const loginHeaderBtn = document.getElementById('login-header-btn');
            const profileDropdown = document.getElementById('profile-dropdown');
            const userName = document.getElementById('user-name');
            
            if (currentUser) {
                loginHeaderBtn.style.display = 'none';
                profileDropdown.style.display = 'block';
                if (userName) {
                    userName.textContent = currentUser.user_metadata.name || currentUser.email.split('@')[0];
                }
            } else {
                loginHeaderBtn.style.display = 'block';
                profileDropdown.style.display = 'none';
            }
        }
        
        // Load 3 free prompts for homepage
        function loadFreePrompts() {
            const freePromptsContainer = document.getElementById('free-prompts');
            if (!freePromptsContainer) {
                console.log('Free prompts container not found');
                return;
            }
            
            console.log('Loading free prompts...');
            
            // Sample free prompts (locked for preview)
            const freePrompts = [
                {
                    title: "Viral Instagram Post",
                    prompt: "Create a viral Instagram post about [topic]. Include: Eye-catching hook in first line, 3-5 engaging bullet points, relevant emojis, trending hashtags, call-to-action. Make it shareable and comment-worthy.",
                    image: "https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=400&h=500&fit=crop"
                },
                {
                    title: "YouTube Thumbnail Text", 
                    prompt: "Generate viral YouTube thumbnail text for [video topic]. Create 3-5 word phrases that are: Bold, curiosity-driven, emotion-triggering, easy to read. Include power words like 'SECRET', 'SHOCKING', 'INSTANT'.",
                    image: "https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?w=400&h=500&fit=crop"
                },
                {
                    title: "Viral Ad Copy",
                    prompt: "Write viral ad copy for [product/service]. Structure: Attention-grabbing headline, pain point identification, solution presentation, social proof, urgency creator, clear CTA. Keep under 150 words, highly persuasive.",
                    image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=400&h=500&fit=crop"
                }
            ];
            
            // Clear existing content
            freePromptsContainer.innerHTML = '';
            
            freePrompts.forEach((prompt, index) => {
                const card = document.createElement('div');
                card.className = 'glass-card prompt-card';
                card.style.cssText = `
                    background: var(--glass-bg);
                    backdrop-filter: blur(20px);
                    border: 1px solid var(--glass-border);
                    border-radius: 20px;
                    overflow: hidden;
                    transition: all 0.3s ease;
                    cursor: pointer;
                    opacity: 0;
                    transform: translateY(30px);
                    animation: fadeInUp 0.6s ease ${index * 0.2}s forwards;
                `;
                
                card.innerHTML = `
                    <div class="card-image" style="height: 200px; overflow: hidden; position: relative;">
                        <img src="${prompt.image}" alt="${prompt.title}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease;">
                        <div class="trending-badge" style="position: absolute; top: 10px; right: 10px; background: linear-gradient(135deg, #ff6b6b, #ee5a24); color: white; padding: 4px 8px; border-radius: 15px; font-size: 11px; font-weight: 600;">üî• Trending</div>
                        <div class="lock-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s; backdrop-filter: blur(5px);">
                            <div style="text-align: center; color: white;">
                                <div style="font-size: 32px; margin-bottom: 8px;">üîí</div>
                                <div style="font-size: 14px; font-weight: 500;">Click to unlock</div>
                            </div>
                        </div>
                    </div>
                    <div class="card-content" style="padding: 20px;">
                        <h3 class="card-title" style="color: var(--text-primary); margin-bottom: 8px; font-size: 18px; font-weight: 600;">${prompt.title}</h3>
                        <p class="card-prompt" style="color: var(--text-secondary); font-size: 14px; line-height: 1.5; margin-bottom: 15px;">${prompt.prompt.substring(0, 100)}...</p>
                        <div class="card-actions" style="display: flex; gap: 8px;">
                            <button class="unlock-btn" style="flex: 1; padding: 12px 16px; background: var(--secondary-gradient); color: white; border: none; border-radius: 10px; font-size: 13px; font-weight: 500; cursor: pointer; transition: all 0.3s ease;">üîì Login to Unlock</button>
                        </div>
                    </div>
                `;
                
                // Add hover effects
                card.addEventListener('mouseenter', () => {
                    const overlay = card.querySelector('.lock-overlay');
                    const img = card.querySelector('.card-image img');
                    if (overlay) overlay.style.opacity = '1';
                    if (img) img.style.transform = 'scale(1.05)';
                    card.style.transform = 'translateY(-5px)';
                    card.style.boxShadow = '0 20px 40px rgba(0, 0, 0, 0.4)';
                });
                
                card.addEventListener('mouseleave', () => {
                    const overlay = card.querySelector('.lock-overlay');
                    const img = card.querySelector('.card-image img');
                    if (overlay) overlay.style.opacity = '0';
                    if (img) img.style.transform = 'scale(1)';
                    card.style.transform = 'translateY(0)';
                    card.style.boxShadow = '0 8px 32px rgba(0, 0, 0, 0.3)';
                });
                
                // Add click handler
                card.addEventListener('click', () => {
                    showLoginPopup();
                });
                
                freePromptsContainer.appendChild(card);
            });
            
            console.log('Free prompts loaded successfully');
        }
        
        // Global functions
        window.copyPrompt = function(prompt) {
            navigator.clipboard.writeText(prompt).then(() => {
                showToast('‚úÖ Prompt copied! Paste in Gemini to generate image');
            }).catch(() => {
                showToast('‚ùå Failed to copy prompt');
            });
        };
        
        window.openInGemini = function(prompt) {
            const geminiUrl = `https://gemini.google.com/app?q=${encodeURIComponent(prompt)}`;
            window.open(geminiUrl, '_blank');
            showToast('üöÄ Opening Gemini... Paste your image and send!');
        };
        
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast show';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                font-size: 14px;
                z-index: 1001;
                transform: translateX(0);
                transition: transform 0.3s ease;
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        window.showLoginPopup = function() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
                backdrop-filter: blur(10px);
            `;
            
            modal.innerHTML = `
                <div style="background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.2); border-radius: 20px; padding: 40px; text-align: center; max-width: 400px; position: relative;">
                    <h3 style="color: white; margin-bottom: 10px; font-size: 24px;">üîì Unlock Premium Prompts</h3>
                    <p style="color: rgba(255,255,255,0.8); margin-bottom: 30px;">Login with Google to access 15+ viral AI prompts for ChatGPT, Gemini, Midjourney & more</p>
                    <button onclick="document.getElementById('google-login-btn').click(); this.parentElement.parentElement.remove();" style="display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 15px; background: white; color: #333; border: none; border-radius: 10px; font-weight: 500; cursor: pointer; transition: all 0.3s ease;">
                        <svg width="20" height="20" viewBox="0 0 24 24">
                            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Continue with Google
                    </button>
                    <button onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 15px; right: 20px; background: none; border: none; color: white; font-size: 24px; cursor: pointer;">√ó</button>
                </div>
            `;
            
            document.body.appendChild(modal);
        };
    </script>
    
    <!-- AdSense Ad Unit -->
    <div style="text-align: center; margin: 40px 0;">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-YOUR_ADSENSE_ID"
             data-ad-slot="YOUR_AD_SLOT_ID"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
</body>
</html>